import { Injectable, Logger } from "@nestjs/common";
import { AnswerDTO } from "./answer.dto";
import axios from "axios";
import { execFile } from 'child_process';
import * as path from 'path';
import * as fs from 'fs';
const FormData = require('form-data');

@Injectable()
export class AnswersService {
    private readonly logger = new Logger(AnswersService.name);
    private TRANSCRIPT = "'{'start': '0.00', 'end': '0.19', 'text': 'हैलो बच्चों काफी दिन बाद मिल रहे हैं, काफी मज़ा आएगा। आज से फिर से हम लोग फिर से क्लासेज लेना स्टार्ट कर दूंगा। मैं आपको पढ़ना स्टार्ट कर दूंगा। मैं पिछले वीडियो का जीस बंदे ने सही ऑसर दिया है। उसका नाम है आदित्य शर्मा और आदित्य शर्मा। तुमको मैं देता हूँ सैल्यूट और उसका सही ऑसर था फोर बट्टे रूट थ्री। अब इस वीडियो को आप पहले देख ले और उस क्वेश्चन का सलूशन आपको वीडियो के एंड में मिल जाएगा।'}, {'start': '0.21', 'end': '0.40', 'text': 'हैलो प्यारे बच्चों माफी चाहेंगे? काफी दिन बाद आपसे मिल रहे हैं। आज बात करेंगे डेरिवेशन ऑफ़ इक्वेशन ऑफ़ मोशन अंडर यूनिफॉर्म एक्स्क्लरेशन यूजिंग दी मेथॅड ऑफ़ इंटिगरेशन एंड डिफ्रेंशिएशन तो तीन इक्वेशन ऑफ़ मोशन होती है जो यूनिफॉर्म यानी की कॉन्स्टेंट एक्स्क्लरेशन जब एक्स्क्लरेशन चेंज ना हो।'}, {'start': '0.41', 'end': '1.05', 'text': 'वहाँ पर तीन इक्वेशन ऑफ़ मोशन लगती हैं पहली वि इस इक्वल्स टु यु +80 दूसरी एस इस इक्वल्स टु यू टी प्लस हाफ 80 स्क्वायर और तीसरी वि स्क्वायर इस इक्वल्स टु यू स्क्वायर +2 ए एस आपको डिफरेंट डिफरेंट टर्म्स की मीनिंग पता होगी। वि हमारा फाइनल वेलासिटी।'}, {'start': '1.11', 'end': '1.13', 'text': 'यूं हमारा इनिशियल वेलोसिटी।'}, {'start': '1.17', 'end': '1.20', 'text': 'ठीक है और क्या है? ए ए हमारा एक्स्क्लरेशन?'}, {'start': '1.21', 'end': '1.28', 'text': 'उसके बाद हमारे पास टीटी बच्चों होता है, टाइम और टाइम मत समझना। टी होता है टाइम पीरियड।'}, {'start': '1.29', 'end': '1.57', 'text': 'ऑफ एक्स्क्लरेशन जब तक बॉडी एक्स्क्लरेट कर रही है वही टाइम रखिएगा जैसे क्वेश्चन में दिया कि बॉडी पे फोर्स लग रहा है। छह सेकंड तक आप बताइए, डिस्प्ले 10 सेकंड में कितना है? तो जब आप डिस्प्ले निकालेंगे तो पहले छह सेकंड के लिए आप ये क्वेश्चन यूज़ करेंगे। सिर्फ जब तक फोर्स थी, जब तक एक्स्क्लरेशन था और एस हमारा क्या है? बच्चों डिस्प्लेसमेंट होता है, डिस्टेंस नहीं होता। याद रखें प्यारे बच्चों एस डिस्टेंस बिल्कुल नहीं है। एस।'}, {'start': '1.57', 'end': '2.09', 'text': 'सिर्फ डिस्प्ले है तो ये टर्म्स थे इनकी अक्चवल मीनिंग मैंने बताई टी की मीनिंग याद रखना टाइम पीरियड ऑफ़ एस्क्लेरेशन जब तक एस्क्लेरेशन हो रहा हो आइए इनकी डेरीवेशन देखते हैं हम डिफरेंशियल इक्वेशन से।'}, {'start': '2.09', 'end': '2.38', 'text': 'डेफिनिशन और इंटिग्रेशन के मेथड से आइये चलिए हम पहले सबसे पहले डरा करते हैं। वि इस इक्वल्स टु यू +80 और यहाँ बच्चों ये एक कॉन्स्टेंट होगा। ये एक ऐसा होगा कॉन्स्टेंट यूनिफॉर्म एक्स्क्लरेशन इसीलिए लिखते हैं कि एक्स्क्लरेशन चेंज नहीं हो रही तो चलिए बच्चों किस तरह से कर सकते हैं। हम अच्छा बताइए एक्स्प्लेरेशन क्या होता है चेंज इन वेलोसिटी अपॉन चेंज इन टाइम बोल सकते हैं कि नहीं चेंज इन वेलोसिटी अपॉन चेंज इन टाइम अब इसको हम डिफरेंशियल फॉर्म में क्या लिखेंगे?'}, {'start': '2.39', 'end': '3.05', 'text': 'छोटी सी विलासिटी डी बी छोटा सा टाइम डी टीए इस इक्वल टु क्या लिख सकते हैं? डी वि ब्य डी टी बहुत बढ़िया। अब मैंने कहा डी वि इस इक्वल्स टु एडी टी लिख सकते हैं कि नहीं? डी वि इस इक्वल्स टु एडी टी अब दोनों तरफ लगा दो। इंटिग्रेशन का साइन ठीक है। मैथ्स में ये चीज़ एकदम करेक्ट होती है कि आप किसी इक्वेशन के दोनों तरफ इंटिग्रेशन का साइन लगा दे। अब मान लो जो बॉडी थी ठीक है, जो बॉडी थी वो'}, {'start': '3.05', 'end': '3.07', 'text': 'शुरुआत में यु स्पीड से चल रही थी।'}, {'start': '3.09', 'end': '3.12', 'text': 'वो टी टैंक तक एक्स्क्लरेट की।'}, {'start': '3.13', 'end': '3.39', 'text': 'ए एक्स्क्लरेशन से और बाद में उसकी वेलोसिटी वि हो गई। ठीक है, शुरू में उसकी विलासिटी कितनी थी यूं और बाद में वेलोसिटी कितनी हुई? वि देखो इस तरफ विलॉसिटी है तो विलासिटी कहाँ से कहाँ जा रही यु से वि तक जा रही टाइम आप इनिशिएट ही मान लो जीरो फाइनली आप टाइम को मान लो टी तो टाइम कहाँ से कहाँ चेंज हुआ? जीरो से टी जो ये वैलिबल है ना इसी के लिमिट रखते हैं। बहुत बढ़िया बच्चों अब'}, {'start': '3.39', 'end': '3.42', 'text': 'डी बी का इंटिगरेशन क्या होता है? बच्चों डी वि का इंटिग्रेशन बी होता है।'}, {'start': '3.43', 'end': '4.13', 'text': 'यु से वि तक भाई डी एक्स का इंटिग्रेशन एक्स होता है तो डी वि का वि हो गया इस इक्वल्स टु अब बच्चा देखो एडी टी में ए हमारा कैसा है कॉन्स्टेंट तो जो भी चीज़ कॉन्स्टेंट होती है उसको हम इंटिगरेशन के बाहर ले लेते है। अंदर क्या बचा? डी टी जीरो से टी कॉन्स्टेंट चीज़ बाहर आ गई। जीस तरह से डी बी कंटिगरेशन भी है। उसी तरह से डी टी का इंटिग्रेशन हो जाएगा टी और बाहर क्या बचा है? ए कहा से कहा जीरो से लेके टी तक अब इसमें हम लिमिट रखेंगे, क्या करेंगे? पहले वि की जगह वि'}, {'start': '4.14', 'end': '4.17', 'text': 'फिर माइनस लगाएंगे, फिरवी की जगह यु रखेंगे।'}, {'start': '4.18', 'end': '4.43', 'text': 'वी की जगह वी रखा माइनस लगाया फिर वी की जगह यु रखा इस इक्वल्स टु आप लिखेंगे ए फिर टी की जगह पहले टी रखो, माइनस लगाओ फिर टी की जगह जीरो रखो तो आया वी माइनस यु इस इक्वल्स 280 ऑर वी कैन से वि इस इक्वल्स टु यू प्लस ए टी तो आपको याद रखना है की पहली इक्वेशन डराइव करने के लिए आपको क्या यूज़ करना है? ये यूज़ करना है ए इस इक्वल्स टु डी वि ब्य डी टी और उसके बाद'}, {'start': '4.44', 'end': '4.44', 'text': 'इंटिग्रेट कर देना है।'}, {'start': '4.45', 'end': '4.48', 'text': 'बहुत बढ़िया, आइए सेकंड एक क्वेश्चन ऑफ़ मोशन देखते हैं।'}, {'start': '4.49', 'end': '5.14', 'text': 'सेकंड एक क्वेश्चन ऑफ़ मोशन सेकंड इक्विशन ऑफ़ मोशन हमारी कौनसी है? सेकंड इक्वेशन ऑफ़ मोशन हमारी है एस इस इक्वल्स टु यु टी प्लस हाफ 80 स्क्वायर ठीक है एस इस इक्वल्स टु यू टी प्लस हाफ 80 स्क्वायर तो इसको हम कैसे करेंगे बच्चों कुछ नहीं करना है आपको इस बार डिस्प्ले का टर्म है, विलासिटी का टर्म है। आप एक बात बताओ विलासिटी क्या होता है चेंज इन डिस्प्ले?'}, {'start': '5.14', 'end': '5.25', 'text': 'अपॉन चेंज इन टाइम तो हम लिख सकते हैं वी इस इक्वल्स टु डी एस ब्य डी टी वही एग्ज़ैम्पल है बॉडी यु वि से चल रही थी।'}, {'start': '5.26', 'end': '5.51', 'text': 'कितने टाइम के लिए चली? टी टाइम के लिए एक्स्क्लरेशन कितना है? ए और डिस्प्ले कितना हुआ? एस। अब हम बोल सकते हैं बच्चों डी एस इस इक्वल्स टु वीडी टी बोल सकते हैं कि नहीं? डी एस इस इक्वल्स टु वीडी टी फिर इसके ऊपर इंटिग्रेशन यहाँ भी इंटिग्रेशन अब हम क्या करेंगे? इस वि की वैल्यू पहली वाली क्वेश्चन्स यहाँ रख देंगे क्योंकि आप इसमें देखो यु बी है ए बी है टीबी है और पहली क्वेश्चन वि की जगह हम यु प्लस'}, {'start': '5.52', 'end': '5.53', 'text': 'ए टी रख सकते हैं।'}, {'start': '5.54', 'end': '6.05', 'text': 'देखो इसे क्वेश्चन में क्या क्या है इस इक्वेशन में? यु बी है टीबी है ए बी है तो वि की जगह हम पूठ कर देंगे, यु +80 तो हमने लिख दिया यु +80।'}, {'start': '6.06', 'end': '6.30', 'text': 'विथ रिस्पेक्ट टु डी टी ठीक है हमने ऐसे लिख दिया अच्छा अब मान लेते हैं। शुरू में डिस्प्ले जीरो है और बाद में जब यहाँ पहुंचे तब इनका डिस्प्ले मान लेते हैं। एस। हो गया तो डिस्प्ले जाएगा जीरो से एस यहाँ वेरी बिल कौन है? यहाँ वेरिबल टाइम है तो शुरू में टाइम फिर से मान लो जीरो और बाद में टाइम को मान लो टी तो टाइम का इंटिगरेशन जीरो से टी अब बच्चों डी एस का इंटिगरेशन एस हो जाएगा।'}, {'start': '6.31', 'end': '6.33', 'text': 'कहा से कहा जीरो से एस।'}, {'start': '6.33', 'end': '6.40', 'text': 'डीएक्स का एक्स होता है तो डी एक्स का एक्स हो गया अब यहाँ बच्चों ध्यान से देखो इसको मैं ऐसे लिख सकता हूँ। इंटिग्रेशन ऑफ़ यु डी टी?'}, {'start': '6.41', 'end': '7.08', 'text': 'प्लस इंटिग्रेशन ऑफ़ 80 डी टी है ना अलग अलग कर सकते हैं। मैंने इंटिग्रेशन भी चीज़ आपको बताई है। जीरो सिटी जीरो सिटी है ना यु डी टी एंड 80 डी टी अब बच्चों यहाँ से देखो यु कॉन्स्टेंट है यु इनिशियल विलासिटी है इनिशियल विलासिटी तो फिक्स है विलासिटी चेंज हो रही है पर इनिशियल विलासिटी तो फिक्स है, तो यू एक कॉन्स्टेंट टर्म है तो यु को हमने बाहर लिया इंटिगरेशन ऑफ़ डी टी, जीरो सिटी और दूसरा आइटम में देखो एक कॉन्स्टेंट है एक उबाल लिया इंटिग्रेशन ऑफ़ टी डी टी जीरो से।'}, {'start': '7.09', 'end': '7.10', 'text': 'टी बहुत बढ़िया।'}, {'start': '7.11', 'end': '7.40', 'text': 'अब बच्चों यहाँ मेरे को बताओ डी टी का इंटिग्रेशन कितना आएगा टी तो मैंने लिखा यु और डी टी का इंटिग्रेशन टी जीरो से टी प्लस ए बाहर है बच्चों टी डी टी का इंटिग्रेशन कितना आएगा ये टी जी पावर वॅन है तो इंटिगरेशन क्या होगा टी की पावर 1+1/1+1 कहाँ से कहाँ जीरो से टी मेरे ख्याल से आपको इतना याद होगा इंटिगरेशन ऑफ़ एक्स की पावर एनडी एक्स क्या होता है एक्स की पावर एन +1 अपॉन एंड +1 तो यही तो किया हमने टिक्गी पावर वॅन थी तो टी की'}, {'start': '7.41', 'end': '7.47', 'text': '+1/1+1 ठीक है यहाँ तक हमको क्लियर हो गया अच्छा चलिए आगे लिखते हैं।'}, {'start': '7.48', 'end': '7.56', 'text': 'इसी चीज़ को मैं ऊपर ले आता हूँ तो इस तरफ मेरे पास ऐसे कहाँ से कहाँ जीरो से एस इस तरफ मेरे पास ये रहा यु।'}, {'start': '7.56', 'end': '8.23', 'text': 'और टी कहा से कहा, जीरो सिटी और मेरे पास ए है और क्या है इसमें? टी स्क्वायर ब्य टू कहा से कहा, जीरो से टी बस अब वैल्यूज रखते है। एस की जगह एस रखा माइनस एस की जगह जीरो रखा यु टी की जगह टी रखा माइनस टी की जगह जीरो रखा प्लस ए टी की जगह टी रखा टी स्क्वायर ब्य टू माइनस टी की जगह जीरो रखा जीरो स्क्वायर ब्य टू तो बच्चो ये एस -0 बन गया एस ये बन गया बच्चो यु पी'}, {'start': '8.23', 'end': '8.29', 'text': 'और बच्चो ने देखो कोई क्या बनेगा ये तो जीरो हो गया हाफ ए टी स्क्वायर तो हम पहुँच गए अपने रिज़ल्ट तक।'}, {'start': '8.29', 'end': '8.42', 'text': 'एस। इस इक्वल्स टु यू टी प्लस हाफ 80 स्क्वायर तो दूसरी क्वेश्चन बिगिन करने के लिए आपको क्या यूज़ करना है? वि इस इक्वल्स टु डी एस ब्य डी टी और पहली वाले क्या यूज़ करना है ए इस इक्वल्स टु डी वि ब्य डी टी क्लियर एकदम?'}, {'start': '8.43', 'end': '8.48', 'text': 'ठीक है, तो दोनों एक क्वेश्चन डिलाइव हो गए हमारी बहुत बढ़िया भाई अब बच्चों चलते है थर्ड एक क्विजन की तरफ।'}, {'start': '8.52', 'end': '9.06', 'text': 'तो अच्छा थर्ड इक्वेशन हम लोग की कौनसी है? ये है वि स्क्वायर इस इक्वल्स टु यु स्क्वायर +2 ए एस ठीक है ये अपना थर्ड इक्वेशन अब ये डिलाइज़ करनी है। इसमें क्या किया जाए, इसमें ध्यान से देखो टाइम नहीं है।'}, {'start': '9.07', 'end': '9.21', 'text': 'इसमें टाइम का टर्म नहीं है। इन दोनों देखो टाइम का टर्म था तो तुमने ऐसे लिख लिया ऐसे लिख लिया, इसमें टाइम नहीं है क्या क्या है? चलो देखते है एक्स्क्लरेशन है, डिस्प्ले है पर टाइम कट्टर नहीं मतलब इंटिग्रेड जब करोगे डी टी को तो टी नहीं आना चाहिए।'}, {'start': '9.23', 'end': '9.27', 'text': 'डी टी 20 क्रियेट करने पे क्या आ रहा है टी आर है की नहीं, हर बार वो नहीं होना चाहिए।'}, {'start': '9.28', 'end': '9.46', 'text': 'समझ में आ रही बात मतलब यहाँ अगर इससे बिगेन करूँ तो भी काम नहीं हो क्योंकि इंटिग्रेट करने पर टाइम का टर्म आएगा यहाँ बिगेन करूँ तो भी नहीं तो बच्चों में बड़ा ट्रिकी होता है ये इसको ध्यान से देखो, पहले हम लिख लेते हैं चलो लिख लेते हैं हम एक्स्क्लरेशन इस इक्वल्स टु डी वि ब्य डी टी पहली और इक्वेशन से ये चीज़ लिख ली हमने।'}, {'start': '9.47', 'end': '10.06', 'text': 'बहुत बढ़िया एक काम करते हैं बच्चों हमको टाइम कटन हटाना है मैं एक काम कर रहा हूँ इसको ऊपर भी डी एस से मल्टीप्लाई किया, नीचे भी डी एस से मल्टीप्लाई किया, कोई दिक्कत कोई दिक्कत नहीं अब देखो ये क्या बन गया? ए इस इक्वल्स टु डी वि ब्य डी एस मल्टीप्लाइड ब्य डी एस ब्य डी टी।'}, {'start': '10.07', 'end': '10.35', 'text': 'लिख सकते हैं। अब देखो ये डी एस ब्य डी टी क्या बन गया चेंज इन डिस्प्ले अपॉन चेंज इन टाइम क्या बन गया? वेलोसिटी ए इस इक्वल्स टु डी वि ब्य डी एस मल्टीप्लाइड ब्य वेलासिटी अब देखो इसमें कहीं टाइम कटर में है नहीं है अपना काम बन गया एक्स्क्लेशन है विलासिटी है डिसप्लेसमेंट है टाइम का टर्म गायब कर दिया तो टाइम का टर्म गायब करने के लिए आपको ये एप्रोच याद रखनी है कि आप लिखो ए इस इक्वल्स टु डी वि ब्य डी टी ऊपर नीचे डी एस से मल्टीप्लाई कर दो, फिर'}, {'start': '10.35', 'end': '10.57', 'text': 'इसको इधर ले जाओ डी वि ब्य डी एस और डी एस ब्य डी टी अब डी एस ब्य डी टी चेंज इन थिस स्पेशल चेंज इन टाइम क्या बन गया वेलोसिटी लिख लिया आपने खेल खत्म आसान हो गई। चीजें आप चाहो तो ये क्वेश्चन ऑफ़ मोशन भी याद रख सकते हो। सीधा सीधा आप एग्ज़ैम में यहाँ से स्टार्ट कर सकते हो। ए इस इक्वल्स टु वीडी वि ब्य डी एस ठीक है कम बच्चे इसको याद करते हैं पर ये वॅन ऑफ़ दी वेरी इम्पोर्टेन्ट इक्वेशन ऑफ़ मोशन है। वॅन ऑफ़ दी वेरी इम्पोर्टेन्ट'}, {'start': '10.58', 'end': '11.23', 'text': 'जैसे इक्विज़न ऑफ़ मोशन बच्चे याद रखते हैं ए इस इक्वल्स टु डी वि ब्य डी टी सबको पता है वेलोसिटी इस इक्वल्स टु चेंज इन डिस्प्ले चेंज इन टाइम सबको पता है पर ये भी आप याद रखो ए इस इक्वल्स टु वीडी वि ब्य डी एस देख रहे हो रटा हुआ है मेरे को तुमको भी ऐसी रटी रही है ये चीज़ ऐसा नहीं की ड्राइव कर रहे है क्या लिखा है, है ना? तीनो क्वेश्चन को उठा के कॉपी में लिख लो और समझ लो की ये तीनों क्या है हमारी इक्वेशन ऑफ़ मोशन भाई साहब ये'}, {'start': '11.23', 'end': '11.40', 'text': 'इक्वेशन ऑफ़ मोशन नहीं है पहली चीज़ ये समझो कोई टीचर आपसे पूछता है की क्वेश्चन ऑफ़ मोशन बताओ तो ये मत बताना वि इस इक्वल्स यु +80 एस नहीं, ये नहीं है एस इस इक्वल यु टी +80 स्क्वायर 20 ये नहीं है क्यों नहीं है? ये इक्विज़न ऑफ़ मोशन है अंडर यूनिफॉर्म एक्स्क्लरेशन सिर्फ और सिर्फ तब जब एक्स्क्लरेशन कॉन्स्टेंट हो तब ये चलेगी।'}, {'start': '11.41', 'end': '11.47', 'text': 'अदरवाईज ये नहीं चलेगी अदर्वाइज़ ये चलेगी ये कब से ये है ये कब से ये है भाई साहब ये ऑलवेज करेक्ट है।'}, {'start': '11.50', 'end': '12.19', 'text': 'ये तीनों इक्वेशन ऑलवेज करेक्ट है। ये सिर्फ तब करेक्ट है जब एक्स्क्लरेशन यूनिफॉर्म चलिए बातों में नहीं उलझते। यहाँ तक आप एप्रोच समझ गए, मैंने बताया इसमें क्या स्पेशल बात थी कि टाइम का टर्म नहीं है। टाइम का टर्म हटाने के लिए ये एप्रोच लगाएंगे हम समझ में आ गई एप्रोच बहुत बढ़िया। अब यहाँ से हम आगे बढ़ते हैं, कुछ नहीं करना। डी एस को इधर ले आओ एडीएस इस इक्वल टु वीडी वीए डी एस इस इक्वल्स टु वीडी वि इंटिग्रेट कर दो डिसप्लेसमेंट कहाँ से कहाँ जीरो से एस वेलोसिटी कहाँ से कहाँ यु से भी'}, {'start': '12.19', 'end': '12.45', 'text': 'इतना तो समझ ही गए डिस्प्ले जीरो से यहाँ डिस्प्ले का अवेलेबल यहाँ वेलो सिटी यु से भी चलिए बच्चों आगे बढ़ते हैं मेरे को बताओ यहाँ पे एक कॉन्स्टेंट है तो ए बाहर आ जाएगा। इंटिग्रेशन ऑफ़ डी एस जीरो से एस लिख सकते हैं यहाँ बच्चों वीडी वि लिखा है तो ये तो कुछ ऐसा हो गया एक्स डी एक्स जैसा इंटिग्रेशन हो गया इसका क्या इंटिग्रेशन होगा? एक्स स्क्वायर ब्य टू एक्स इ पावर 1+1/1+1 टाइप तो यहाँ पे हमारा हो जाएगा। क्या ये वि स्क्वायर'}, {'start': '12.45', 'end': '12.51', 'text': 'ब्य टू है? ना वि की पार वॅन है? वि की पार 1+1/1+1 इंटिग्रेशन हो गया।'}, {'start': '12.51', 'end': '13.17', 'text': 'कहाँ से कहाँ यु से वीडी एस कैंटिग्रेशन बच्चों एस आएगा कहाँ से कहाँ जीरो से एस बाहर ए लिखा रख देते हैं अब इसमें एक बार बी की जगह वि रखना पड़ेगा वि स्क्वायर ब्य टू माइनस फिर वि की जगह यु रखना पड़ेगा यु स्क्वायर ब्य टू बन गया भाई, इधर क्या रखेंगे हम एक बार एस की जगह एस रखा -1 बार एस की जगह जीरो रखा इस इक्वल्स टु बी स्क्वायर माइनस यु स्क्वायर बटे टू ये टू इधर आ जाएगा और'}, {'start': '13.17', 'end': '13.18', 'text': 'उधर आ जाएगा तो हम क्या लिख सकते हैं?'}, {'start': '13.21', 'end': '13.44', 'text': 'टू ए एस इस इक्वल टु वी स्क्वायर माइनस यू स्क्वायर यू किधर ले लो तो वी स्क्वायर इस इक्वल्स टु यू स्क्वायर +2 ए एस उसको इधर ले के हो गया तो इसको प्रैक्टिस करिए। वीडियो को एक दो बार देखिए ये एग्ज़ैम में पांच नंबर का आता है आपके स्कूल एग्ज़ैमनेशन में और इसमें मैंने आपको जो चीज़ बताई है वो याद रखिएगा। एक ये टर्म याद रखना की एस्कलेशन को हम लिख सकते हैं वीडी वि ब्य डी एस बाकी सब तो आपको पता ही था। अभी तक'}, {'start': '13.45', 'end': '13.54', 'text': 'तो बहुत बढ़िया, एक छोटा सा वीडियो था जिसमे इम्पोर्टेन्ट डेरिवेशन मैंने आपको बताई उम्मीद करता हूँ आपको ये वीडियो पसंद आया होगा, थैंक यू सो मच क्वेश्चन में हमने आपसे पूछा था की अगर ए इस इक्वल्स टु एक्स स्क्वायर है।'}, {'start': '13.56', 'end': '14.16', 'text': 'तो आप हमें विलासिटी बताइए जब एक्स की वैल्यू टू हो और ये गिवेन था की वेलोसिटी जीरो है, जब एक्स की वैल्यू जीरो है तो आप देख रहे हो यहाँ ए है, एक्स डिस्प्लेमेंट है और विलासिटी है और टाइम का टर्म यहाँ कहीं दिखाई नहीं पड़ रहा, मतलब टाइम का टर्म नहीं है तो हम कौनसी इक्वेशन यूज़ करे? ए इस इक्वल्स टु वीडी वि ब्य डी एस'}, {'start': '14.17', 'end': '14.46', 'text': '22 में टाइम का टर्म नहीं है। एक्स्क्लरेशन है वेलासिटी है डिस्प्ले इस इसके जगह में एक्स लिख लूँ क्योंकि यार डिस्प्ले एक्स से दिखा रहा है यहाँ पे तो इसकी जगह एक्स लिख लिया तो एक ही जगह लिखा मैंने वीडी वि बटे डी एक्स इस इक्वल्स टु एक्स स्क्वायर अब डी एक्स उधर गया तो वीडी वि इस इक्वल्स टु एक्स स्क्वायर डी एक्स अब इसको इंटिग्रेट कर दो, इसको इंटिग्रेट कर दो कहाँ से कहाँ करें इंडेफिनेट कर दो ठीक है तो वीडी वि का इंटेग्रेशन होगा। वि स्क्वायर ब्य टू और एक्स स्क्वायर डी एक्स का होगा एक्स क्यू ब्य थ्री प्लस सी लग जाएगा।'}, {'start': '14.47', 'end': '15.17', 'text': 'निकालने का तरीका क्या है? गिवेन कंडीशन देखो वि की वैल्यू जीरो है। जब एक्स की वैल्यू जीरो है तो वि को जीरो पूठ करो, एक्स को जीरो पूठ करो ये जीरो ये जीरो तो सी की वैल्यू भी कितनी आएगी जीरो आएगी। पूठ करके देख लो जीरो इस इक्वल टु जीरो प्लस सी तो सी के वैल्यू कितनी हुई? जीरो मतलब सी को यहाँ से हटा सकते है। कोई जरूरत नहीं है। ये बन गयी है हमारी क्वेश्चन अब हमसे क्या पूछा है की निकालो जब एक्स की वैल्यू टू हो तो एक्स की वैल्यू टू रख 220 स्क्वायर ब्य टू इस इक्वल टु एक्स जगह टू रखा टू क्यूब ब्य थ्री तो वि स्क्वायर इस इक्वल्स टु टू इधर हियर टू की पा फोर ब्य थ्री'}, {'start': '15.17', 'end': '15.47', 'text': 'हम क्या करेंगे? 20 इक्वल स्टूडेंट रूट लिखेंगे अंडर रूट ऑफ़ टू की पा फोर ब्य थ्री टू की पा फोर का अंडर रूट क्या आएगा टू स्क्वायर और यहाँ रूट थ्री टू स्क्वायर मतलब फोर बट ए रूट थ्री प्लस माइनस दोनों होगा अब सुनो क्योंकि स्क्वायर था आपने रूट निकाला है तो दोनों ऑसर सही है विज़ इक्वल से किसी ने कहा +4 ब्य रूट थ्री तो सही किसी ने कहा -4 ब्य रूट थ्री तो भी सही क्योंकि स्पेसिफाईड नहीं है बॉडी पॉज़िटिव डायरेक्शन में जा रही है की नेगेटिव में तो आदित शर्मा का यहाँ से सही था, आदित शर्मा को मैंने किया सैल्यूट ऑसर कई लोग का और सही है बट जो सबसे सबसे पहले सबसे इनीशियली सबसे जल्दी'}, {'start': '15.47', 'end': '15.51', 'text': 'सही ऑसर दिया उसको मिला है सैल्यूट सो चलिए पढ़ते रहिये मज़े करिए।'}'"


    private readonly apiUrl = 'https://litellm-data.penpencil.co/v1/chat/completions';
    private readonly apiKey = 'sk-z6Gd3ZjZcdbEx_x5zrlI6Q';

    constructor(
    ) { }

    async getAnswer(body: AnswerDTO) {
        const { question, timestamp } = body;

        const prompt = `Answer the question based on the context video transcript: ${this.TRANSCRIPT}\nQuestion: ${question}\nTimestamp: ${timestamp}. Do not include any additional information or context. Just provide the answer to the question.`;

        try {
            const response = await axios.post(
                this.apiUrl,
                {
                    model: 'gpt-4.1',
                    messages: [
                        {
                            role: 'user',
                            content: prompt,
                        },
                    ],
                },
                {
                    headers: {
                        'Authorization': `Bearer ${this.apiKey}`,
                        'Content-Type': 'application/json',
                    },
                },
            );

            const textResponse = response.data.choices[0].message.content;
            const audioFile = await this.getTTS(textResponse);

            const savedFile = await this.uploadFileToS3(audioFile);
            fs.unlinkSync(audioFile);

            return { answer: textResponse, audioFile: `${savedFile?.baseUrl}${savedFile?.key}` };
        } catch (error) {
            throw error
        }
    }

    async getTTS(text: string): Promise<string> {
        return new Promise((resolve, reject) => {
            const outputFile = 'audio_output.wav';
            const scriptPath = path.resolve(__dirname, '../../../../transcription/text-to-speech.py');
            const pythonCmd = 'python3';

            execFile(pythonCmd, [scriptPath, text], (error, stdout, stderr) => {
                if (error) {
                    console.error('TTS Error:', stderr);
                    reject(error);
                } else {
                    console.log('TTS Output:', stdout);
                    resolve(outputFile);
                }
            });
        });
    }

    async uploadFileToS3(filePath: string) {
        const form = new FormData();
        form.append('file', fs.createReadStream(filePath));

        const headers = {
            ...form.getHeaders(),
            'sec-ch-ua': '"Chromium";v="118", "Google Chrome";v="118", "Not=A?Brand";v="99"',
            'integration-with': '',
            'sec-ch-ua-mobile': '?0',
            'client-version': '2.3.13',
            'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/118.0.0.0 Safari/537.36',
            'Accept': 'application/json, text/plain, */*',
            'Referer': 'https://www.pw.live/',
            'randomId': '7ec98178-a2c1-47db-b6c3-3d69d390c67f',
            'client-id': '5eb393ee95fab7468a79d189',
            'client-type': 'WEB',
            'sec-ch-ua-platform': '"macOS"',
        };

        try {
            const response = await axios.post('https://api.penpencil.co/v1/files', form, { headers });
            return response?.data?.data;
        } catch (error: any) {
            console.error('Upload failed:', error.response?.data || error.message);
            throw error;
        }
    }
}